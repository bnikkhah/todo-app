<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  
  <title>Frontend Mentor | Todo app</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: hsl(228, 45%, 44%); }
  </style>

  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
  <main
    role="main"
    class="text-center"
    x-data="todoData"
  >
    <div class="container">
      <div class="row">
        <div class="col-12">

          <h1>TODO</h1>

          <!-- Todo insert -->
          <div class="input-group mb-4">
            <div class="input-group-text">
              <input
                class="form-check-input mt-0"
                type="checkbox"
                value=""
                aria-label="Checkbox for following text input"
              />
            </div>
            <input
              type="text"
              class="form-control"
              aria-label="Text input with checkbox"
              placeholder="Create a new todo..."
              x-model="todoText"
              @keydown.enter="handleInsertTodo"
            />
          </div>

          <!-- Todo list -->
          <div class="todo-list shadow">
            <ul class="list-group">
              <template
                x-for="(todo, index) in todos"
                :key="index"
              >
                <li class="list-group-item p-0">
                  <div class="input-group">
                    <div class="input-group-text">
                      <input
                        class="form-check-input mt-0"
                        type="checkbox"
                        value=""
                        aria-label="Checkbox for following text input"
                        @click="handleCompleteTodo(index)"
                      />
                    </div>
                    <input
                      type="text"
                      class="form-control todo-text"
                      :class="{ 'isCompleted' : todo.isCompleted }"
                      aria-label="Text input with checkbox"
                      :value="todo.item"
                    />
                    <button
                      type="button"
                      class="btn-close"
                      aria-label="Close"
                      @click="handleRemoveTodo(index)"
                    >
                    </button>
                  </div>
                </li>
              </template>
            </ul>
            <ul class="list-group">
              <li class="list-group-item">
                <div class="meta">
                  <div class="row">
                    <div class="col">
                      <span>
                        <span x-text="handleTodosLeft"></span> items left
                      </span>
                    </div>
                    <div class="col">
                      <ul class="list-inline">
                        <li
                          class="list-inline-item cursor"
                          @click="filterAllTodos"
                        >
                          All
                        </li>
                        <li
                          class="list-inline-item cursor"
                          @click="filterActiveTodos"
                        >
                          Active
                        </li>
                        <li
                          class="list-inline-item cursor"
                          @click="filterCompletedTodos"
                        >
                          Completed
                        </li>
                      </ul>
                    </div>
                  <div class="col">
                      <span
                        class="cursor"
                        @click="handleClearCompletedTodos"
                      >
                        Clear completed
                      </span>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </div>

          <p>Drag and drop to reorder list</p>
        </div>
      </div>
    </div>
  </main>
</body>
</html>

<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('todoData', () => ({
      todoText: '',
      todos: [
        {
          item: 'Complete online Javascript course',
          isCompleted: true
        },
        {
          item: 'Jog around the park 3x',
          isCompleted: false
        },
        {
          item: '10 minutes meditation',
          isCompleted: false
        },
        {
          item: 'Read for 1 hour',
          isCompleted: false
        },
        {
          item: 'Pick up groceries',
          isCompleted: false
        },
        {
          item: 'Complete Todo App on Frontend Mentor',
          isCompleted: false
        },
      ],
      handleInsertTodo() {
        this.todos = [
          ...this.todos,
          {
            item: this.todoText,
            isCompleted: false
          }
        ]

        this.todoText = '';
      },
      handleRemoveTodo(todoIndex) {
        this.todos = this.todos.filter((_, index) => index !== todoIndex)
      },
      handleCompleteTodo(todoIndex) {
        const temporaryTodos = [...this.todos];
        temporaryTodos[todoIndex].isCompleted = !temporaryTodos[todoIndex].isCompleted;
      },
      handleClearCompletedTodos() {
        this.todos = this.todos.filter((todo) => !todo.isCompleted)
      },
      handleTodosLeft() {
        const filteredList = this.todos.filter((todo) => !todo.isCompleted);
        return filteredList.length
      },
      filterCompletedTodos() {

      },
      filterActiveTodos() {

      },
      filterAllTodos() {

      }
    }))
  })
</script>